# 案例研究 – City Intel Map Kernels  
嫌惡雷達／寵物友善地圖／土地雷達

[English](./case-city-intel-map-kernels-ai-workflow.md) | [繁體中文 / Traditional Chinese](./case-city-intel-map-kernels-zh-TW.md)

---

## 1. 專案背景（Context）

- **專案名稱：** City Intel Map Kernels（城市情報地圖核心）  
- **時間範圍：** 2024–2025（多輪 MVP／實驗）  
- **角色：** System Designer / R0 Architect / AI Orchestrator  
- **領域：** 城市情報、生活決策支援、UGC 地圖工具、一人公司產品原型  

City Intel Map Kernels 是一組以「**地圖作為決策工具**」的產品系列，  
建立在同一套「城市情報 Kernel」之上，目前的主題包含：

- **嫌惡地圖（Nuisance Radar）** –  
  協助使用者理解「某區域附近有哪些可能影響生活品質的設施／條件？」  

- **寵物友善地圖（Pet-Friendly Map）** –  
  尋找真正對寵物友善的空間（咖啡廳、公園、公共空間等）。  

- **土地雷達／開發雷達（Land Radar）** –  
  聚焦土地使用變更、重大開發、環境風險與長期價值變動。  

這些地圖共用同一套 **城市／地點資料模型**，  
差別只在於「如何解讀與呈現」這些資料。  
長期目標是形成一個可重複使用的 **City Intel Kernel**，  
未來無論是租屋、置產、選點開店或一人公司營運，都可以在此基礎上擴充。

---

## 2. 問題定義（Problem）

現實中，關於「要住在哪裡／在哪裡營運」的決策存在幾個共通問題：

1. **資訊極度分散且不一致**  
   - 嫌惡設施（污染、噪音、工業設施等）資訊散落在新聞、法規、論壇；  
   - 寵物友善空間散佈於社團、評論與部落格。  

2. **一般地圖只顯示「點」，不顯示「價值與風險」**  
   - 傳統地圖可以看到店家與評分，  
   - 卻不會告訴你：
     - 這區是不是吵雜、不好住？  
     - 對寵物是否友善？  
     - 附近土地是否正在開發或有長期風險？  

3. **每個主題容易變成獨立產品，沒有共享 Kernel**  
   - 這裡做一個「寵物地圖」，那裡做一個「嫌惡地圖」，  
   - schema 與邏輯完全不同，  
   - 每加一個主題就像重做一次產品。

**核心問題：**  
> 如何設計一個可重複使用的「城市情報 Kernel」，  
> 讓多個 UGC 主題地圖共用同一結構，  
> 又能提供截然不同的主題視角？

---

## 3. 我的角色：System Designer / R0 / AI Orchestrator

在這個專案裡，我的工作不是單做地圖，而是：

- 設計 **City Intel Kernel 的 SSOT**：  
  - 例如 `cities`, `places`, `place_tags`, `place_attributes`, `place_scores` 等；  
  - 確保「主題差異」主要體現在標籤／層級上，而非完全不同的 schema。  

- 作為 **R0（Root Orchestrator）**：  
  - 維護核心 Kernel（城市＋地點基礎資料）；  
  - 定義各主題模組（嫌惡雷達、寵物友善、土地雷達）的邊界；  
  - 管理 `modules_map` 與未來整合規則。  

- 身為 **AI Orchestrator**：  
  - 使用多個 LLM 協助：
    - 提出 schema 改良建議；  
    - 設計標籤／分類系統；  
    - 產出前端地圖的 UX 文案與情境；  
    - 探索 UGC 審核與遊戲化工作流。  

- 同時也是 **一人公司實驗者**：  
  - 將每個主題地圖當成 4–8 週實驗 Slot；  
  - 以最小可用產品（MVP）方式上線並觀察 Kernel 的耐用度。

---

## 4. 解法設計與工作流（Solution & Workflow）

### 4.1 核心資料模型（City Intel Kernel）

City Intel Kernel 主要由以下實體構成：

- `cities` / `districts`  
  - 城市與行政區資訊（必要時可加入人口密度、用途等）。  

- `places`  
  - 具體地點（店家、設施、路口等），包含座標與基本屬性。  

- `place_tags`  
  - 彈性標籤系統，以多主題疊加在同一個 place 上：  
  - 例如：`nuisance_factory`, `noise_source`, `landfill`,  
           `pet_friendly_cafe`, `dog_park`, `vet_clinic` 等。

- `place_attributes`  
  - 結構化屬性，如營業時間、室內／室外、免費／收費、是否需預約。  

- `place_scores`  
  - 主題相關評分，例如：
    - 「寵物友善程度」、  
    - 「生活舒適度」、  
    - 「開發／風險指數」。  

有了這個 Kernel 之後：

- 嫌惡雷達、寵物友善地圖與土地雷達，  
  不再是三個獨立產品，  
  而是同一資料底盤上的不同視圖與過濾條件。

### 4.2 Modules（以主題作為模組）

每個主題被實作成 Kernel 上的一個模組，例如：

- `M11_NuisanceRadar`  
  - 關注：噪音、污染、車流壅塞、工業設施、嫌惡設施等；  
  - 讀取 Kernel 的 `places`, `place_tags`, `place_scores`；  
  - 提供「生活舒適度／嫌惡度」視角。  

- `M12_PetFriendlyMap`  
  - 關注：寵物友善的咖啡廳、餐廳、公園、旅宿與服務；  
  - 使用標籤與屬性來篩選與排序地點；  
  - 未來可疊加 UGC 評價、照片與打卡。  

- `M13_LandRadar`  
  - 關注：土地使用變更、重大開發、環境風險區域；  
  - 結合 Kernel 的地點資料與外部資料（都市計畫、地政資訊等）；  
  - 在同一張地圖上呈現風險／機會的覆蓋層。  

每個模組在 SSOT 的 `modules_map` 中被宣告：

- 模組 ID、table prefix；  
- 依賴哪些 Kernel 資料表；  
- 是否有自己的擴充表或設定。  

設計目標是：**模組可以被卸載，而不破壞 Kernel。**

### 4.3 AI Orchestration 的實務運用

LLM 被用在多個層級，而不是一個「全能黑盒」：

1. **L1–L2：概念與架構探索**  
   - 請 AI 協助整理：
     - 外送員、寵物飼主、租屋族、副業族等的城市情報需求；  
     - 現有工具的共通概念模式（而非抄 UI）。  
   - 在 R0 層根據這些輸出決定：
     - Kernel 需要哪些實體與關聯；  
     - 哪些維度適合用 tag 或 score 建模。

2. **L3：schema／API／UI 草稿**  
   - 讓 AI 提議：
     - Supabase / PostgreSQL 資料表；  
     - 地圖 API 查詢模式；  
     - 前端 layout（例如左側列表＋右側地圖）。  
   - 我負責檢查：
     - 是否符合 Core vs Module 原則；  
     - 命名與結構是否統一。

3. **L4：情境與測試**  
   - 讓 AI 產生真實感情境，例如：
     - 帶狗租屋的遠距工作者；  
     - 對噪音非常敏感的人；  
     - 想在特定行政區買房但擔心未來開發的自住客。  
   - 用這些情境檢查：
     - Kernel 與模組是否能回答他們的關鍵問題；  
     - 有沒有缺少欄位或視圖。

4. **L5：UX 文案與敘事**  
   - AI 協助撰寫：
     - 地圖說明文字、tooltip、filter 說明、FAQ。  
   - 我再針對在地語言與定位進行調整。

整體來說，AI 在這裡扮演 **多層級共創者／工人** 的角色，  
而 R0 負責：

- 結構一致性、  
- Core／Module 邊界、  
- 實驗節奏與範圍。

---

## 5. 實驗與迭代（Experiments & Iterations）

我將 City Intel 視為一連串實驗，而不是一次做完的大產品。

### 5.1 實驗 Slot 範例

| Slot ID     | 主題                  | 範圍               | 目標                                          |
|------------|-----------------------|--------------------|-----------------------------------------------|
| Ex-CITY-01 | 嫌惡地圖 MVP          | 台北部分區域       | 驗證 Kernel 能正確標註與渲染嫌惡點            |
| Ex-CITY-02 | 寵物友善地圖 MVP      | 台北部分行政區     | 收集第一批寵物友善地點與使用回饋             |
| Ex-CITY-03 | Land Radar 概念測試   | 少數關鍵行政區     | 檢驗資料來源與視覺呈現的可行性               |

每個實驗我會：

1. 用 AI 協助撰寫假設與成功標準；  
2. 設定「最低可用資料量」（例如 30–50 個有意義的點）；  
3. 上線後觀察：
   - 自己身為主要使用者的體驗；  
   - 未來測試者的回饋；  
   - 技術負擔（渲染、查詢、維護）。

在每一輪結束時，AI 會協助我：

- 產出簡短實驗報告草稿，  
- 歸納重點學習與下一步建議。

---

## 6. 成果與學習（Outcomes & Learnings）

目前 City Intel Map Kernels 已達成：

- **技術面：**
  - 建立可支援多主題地圖的 **城市 Kernel schema**；  
  - 成功在同一資料底盤上渲染多個主題視圖（嫌惡、寵物友善等）。  

- **產品面：**
  - 已有可實際使用的 MVP（自己與少量使用者測試）；  
  - 驗證「以地圖作為決策工具」在生活與工作選擇上是有感的。  

- **方法論面（對 R0 / AI Orchestrator 而言）：**
  - 驗證 SSOT + Core/Module 架構在空間產品上的可行性；  
  - 示範如何讓 AI 在 L2–L5 協助 schema、情境、文案與迭代規劃，  
    同時由 R0 負責結構與整合。

關鍵學習：

1. 如果一開始是「先做主題、後想結構」，  
   第二、第三個主題會非常難加；  
2. 把地圖當作「決策工具」而不是單純可視化，  
   需要把行為、心理與權衡考慮進來；  
3. 對一人公司來說，設計良好的 Kernel  
   讓未來產品可以共享同一骨幹，而不是每次重寫。

---

## 7. 對企業的可移植性（Potential for Company Use）

City Intel Map Kernels 的設計方式，可以移植到多種企業場景：

- **金融／保險業**  
  - 以城市／據點 Kernel 為基礎，疊加：
    - 分行／ATM 網路、  
    - 客戶分布、  
    - 風險區域與理賠紀錄等；  
  - 用 AI 產出地圖報表與策略敘事，  
    同時由 R0 團隊治理核心資料與規則。

- **連鎖零售／餐飲**  
  - 共享「據點 Kernel」給所有店點；  
  - 在其上疊加：
    - 擴點分析、  
    - 活動成效、  
    - 顧客輪廓模組等。

- **城市規劃與 ESG 報告**  
  - 將環境、噪音、交通、災害風險等資料整合成一套 Kernel；  
  - 讓不同內部團隊在其上建立自己的主題模組；  
  - 以 AI 協助敘事與模擬。

對我而言，City Intel Map Kernels 不只是產品雛形，  
更是將 **R0 / AI Orchestrator 方法論**  
應用在「空間決策」領域的一個實驗場。

未來只要涉及據點、城市、區域風險或地理分布的工作，  
這套 Kernel + Module + AI Orchestration 的思維  
都可以直接拿來設計企業內部的平台與決策工具。
